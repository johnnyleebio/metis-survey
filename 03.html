<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>MeTiS 31 - 37</title>
        <style>
            body { margin: 0; }
        </style>
    </head>
    <body>
        <script type="module">

            import * as THREE from 'https://unpkg.com/three@0.126.1/build/three.module.js';

            import { MapControls } from 'https://unpkg.com/three@0.126.1/examples/jsm/controls/OrbitControls.js';

            import { STLLoader } from 'https://unpkg.com/three@0.126.1/examples/jsm/loaders/STLLoader.js';

            import { GUI } from 'https://unpkg.com/three@0.126.1/examples/jsm/libs/dat.gui.module.js';

            let camera, controls, scene, renderer;

            init();
            animate();

            function init() {

                scene = new THREE.Scene();
                scene.background = new THREE.Color( 0xcccccc );
                scene.fog = new THREE.FogExp2( 0xcccccc, 0.002 );

                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( window.innerWidth, window.innerHeight );
                document.body.appendChild( renderer.domElement );

                camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
                camera.position.set( 350, 350, 0 );

                // controls

                controls = new MapControls( camera, renderer.domElement );

                //controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)

                controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled
                controls.dampingFactor = 0.1;

                controls.screenSpacePanning = false;

                controls.minDistance = 10;
                controls.maxDistance = 500;

                controls.maxPolarAngle = Math.PI / 2;

                // meshes

                // subject 01 

                const loader = new STLLoader();


                // subject 03 

                loader.load( './models/03_afni_brainsuite.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120, 0, 0 );
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                loader.load( './models/03_ants_brainsuite.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120, 0, - 20 );
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                loader.load( './models/03_brainsuite_brainsuite.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120, 0, - 40 );
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                loader.load( './models/03_brainsuite_freesurfer.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120 - 15, 0 + 10, - 60 + 10);
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                loader.load( './models/03_brainsuite_nighres.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120, 0, - 80 );
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                loader.load( './models/03_freesurfer_brainsuite.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120, 0, - 100 );
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                loader.load( './models/03_fsl_brainsuite.stl', function ( geometry ) {

                    const material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200, side: THREE.DoubleSide } );
                    const mesh = new THREE.Mesh( geometry, material );

                    mesh.position.set( 120, 0, - 120 );
                    mesh.rotation.set( 0, - Math.PI / 2, 0 );
                    mesh.scale.set( 0.1, 0.1, 0.1 );

                    mesh.castShadow = true;
                    mesh.receiveShadow = true;

                    scene.add( mesh );

                } );

                


                var axesHelper = new THREE.AxesHelper( 5 );
                scene.add( axesHelper );

                // lights

                const dirLight1 = new THREE.DirectionalLight( 0xffffff );
                dirLight1.position.set( 1, 1, 1 );
                scene.add( dirLight1 );

                const dirLight2 = new THREE.DirectionalLight( 0x002288 );
                dirLight2.position.set( - 1, - 1, - 1 );
                scene.add( dirLight2 );

                const ambientLight = new THREE.AmbientLight( 0x222222 );
                scene.add( ambientLight );

                //

                window.addEventListener( 'resize', onWindowResize );


                const gui = new GUI();
                gui.add( controls, 'screenSpacePanning' );

                }

                function onWindowResize() {

                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();

                    renderer.setSize( window.innerWidth, window.innerHeight );

                }

                function animate() {

                    requestAnimationFrame( animate );

                    controls.update(); // only required if controls.enableDamping = true, or if controls.autoRotate = true

                    render();

                }

                function render() {

                    renderer.render( scene, camera );

                }

            animate();
        </script>
    </body>
</html>